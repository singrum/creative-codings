# 구글 노래 검색창에 나오는 3D 애니메이션 만들기

## 1. 관찰

Google앱의 노래 검색 기능에서 소리의 크기를 시각화 해서 보여주는 애니메이션이 있다. 이 애니메이션을 web에서 구현해보려고 한다. 3d 그래픽을 시각화해주는 라이브러리인 three.js, 이것을 리액트에서 사용할 수 있게 해주는 라이브러리인 [React Three Fiber(R3F)](https://docs.pmnd.rs/react-three-fiber/getting-started/introduction)을 사용하여 구현할 것이다. 
우선 애니메이션의 작동 방식과 구현 아이디어를 떠올려 보았다.  
1. 원 모양의 점이 구 형태로 배열되있다. three.js의 IcosahedronGeometry의 detail값을 조절하고, 꼭짓점에 위치시키면 될 것 같다. 구에서 가까운 절반만 보이고, 뒤에 있는 점은 보이지 않는다. 이것은 PlaneGeometry를 배경과 같은 색으로 설정하여 만들 수 있을 것 같다.
2. 점들은 구의 normal 방향으로 진동한다. 소리의 크기에 비례하여 진동의 진폭이 정해진다. 모든 점이 똑같이 진동하지는 않는다. 진동의 위상(Phase)가 모두 다르다. 각 점의 uv좌표에 따른 부드러운 노이즈를 phase로 설정하면 될 것 같다.
3. 점의 색은 노랑, 파랑, 초록, 빨강을 가질 수 있다. 중간에 멈춰서 잘 살펴보면 점들은 줄무늬 형태이고, 약간의 노이즈가 더해져있다. 이러한 패턴을 예전에 three.js 쉐이더 튜토리얼에서 본 적이 있다.

// 유튜브 캡쳐

이 그림에서 줄무늬의 개수를 줄이고, 줄무늬를 설정하는 함수를 